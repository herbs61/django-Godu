{% extends 'users/layout/home.html' %}
{% load static %}

{% block content %}


<div class="flex h-screen overflow-hidden"> 
    {% include "users/components/sidebar.html" %}

    <div class="flex flex-col w-full">
        {% include 'users/components/navbar.html' %}
           
        <div class="flex-1 overflow-y-auto">
            {% if messages %}
            {% for message in messages %}
                <p class="text-red-500 text-sm text-center">{{ message }}</p>
            {% endfor %}
        {% endif %}
<div class="max-w-3xl mx-auto p-10 bg-white shadow-md rounded-lg mt-6 h-5">
  {% if messages %}
            {% for message in messages %}
                <p class="text-red-500 text-sm text-center">{{ message }}</p>
            {% endfor %}
        {% endif %}
    <h2 class="text-2xl font-semibold text-gray-800 mb-4">Edit Profile</h2>
    <form method="POST" enctype="multipart/form-data" class="space-y-6">
        {% csrf_token %}

        <!-- Profile Picture -->
        <div class="flex items-center space-x-4">
            <img src="{{ user.profile_picture.url|default_if_none:'/static/images/default-profile.png' }}" onerror="this.src='/static/images/default-profile.png'"  alt="Profile Picture" class="w-16 h-16 rounded-full object-cover border">
            <div>
                <label class="block text-sm font-medium text-gray-700">Change Profile Picture</label>
                {{ profile_form.profile_picture }}
            </div>
        </div>

        <hr class="my-2">

    <!-- Profile Info -->
<div class="grid grid-cols-1 md:grid-cols-2 gap-4">
    <div>
        <label class="block text-sm font-medium text-gray-700">{{ profile_form.fname.label }}</label>
       <input type="text" name="fname" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400" value="{{ user.fname }}">
       
        {% if profile_form.fname.errors %}
            <p class="text-red-600 text-sm">{{ profile_form.fname.errors|striptags }}</p>
        {% endif %}
        {% if profile_form.fname.errors %}
            <p class="text-red-600 text-sm">{{ profile_form.fname.errors|striptags }}</p>
        {% endif %}
    </div>

    <div>
        <label class="block text-sm font-medium text-gray-700">{{ profile_form.mname.label }}</label>
        <input type="text" name="mname" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400" value="{{ user.mname }}">
        {% if profile_form.mname.errors %}
            <p class="text-red-600 text-sm">{{ profile_form.mname.errors|striptags }}</p>
        {% endif %}
    </div>

    <div>
        <label class="block text-sm font-medium text-gray-700">{{ profile_form.lname.label }}</label>
        <input type="text" name="lname" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400" value="{{ user.lname }}">
        {% if profile_form.lname.errors %}
            <p class="text-red-600 text-sm">{{ profile_form.lname.errors|striptags }}</p>
        {% endif %}
    </div>

    <div>
        <label class="block text-sm font-medium text-gray-700">{{ profile_form.dob.label }}</label>
        <input type="text" name="dob" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400" value="{{ user.dob }}">
        {% if profile_form.dob.errors %}
            <p class="text-red-600 text-sm">{{ profile_form.dob.errors|striptags }}</p>
        {% endif %}
    </div>

    <div>
        <label class="block text-sm font-medium text-gray-700">{{ profile_form.gender.label }}</label>
        <select name="gender" id=""  value="{{ user.gender }}" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400">
            <option value="{{ user.gender }}">Select</option>
            <option value="{{ user.gender }}">Male</option>
            <option value="{{ user.gender }}">Female</option>
        </select>
      
        {% if profile_form.gender.errors %}
            <p class="text-red-600 text-sm">{{ profile_form.gender.errors|striptags }}</p>
        {% endif %}
    </div>

    <div>
        <label class="block text-sm font-medium text-gray-700">{{ profile_form.email.label }}</label>
        <input type="text" name="email" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400   " value="{{ user.email }}">
        {% if profile_form.email.errors %}
            <p class="text-red-600 text-sm">{{ profile_form.email.errors|striptags }}</p>
        {% endif %}
    </div>
</div>
<hr class="my-2">

<!-- Password Change -->
<h3 class="text-lg font-medium text-gray-800 mb-2">Change Password (Optional)</h3>
<div class="grid grid-cols-1 md:grid-cols-2 gap-4">
    
    <!-- Old Password -->
    <div>
        <label class="block text-sm font-medium text-gray-700">{{ password_form.old_password.label }}</label>
        <input type="password" name="old_password"
            class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400"
            value="">
        {% if password_form.old_password.errors %}
            <p class="text-red-600 text-sm">{{ password_form.old_password.errors|striptags }}</p>
        {% endif %}
    </div>

    <!-- New Password -->
    <div>
        <label class="block text-sm font-medium text-gray-700">{{ password_form.new_password1.label }}</label>
        <input type="password" name="new_password1"
            class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400"
            value="">
        {% if password_form.new_password1.errors %}
            <p class="text-red-600 text-sm">{{ password_form.new_password1.errors|striptags }}</p>
        {% endif %}
    </div>

    <!-- Confirm New Password -->
    <div>
        <label class="block text-sm font-medium text-gray-700">{{ password_form.new_password2.label }}</label>
        <input type="password" name="new_password2"
            class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400"
            value="">
        {% if password_form.new_password2.errors %}
            <p class="text-red-600 text-sm">{{ password_form.new_password2.errors|striptags }}</p>
        {% endif %}
    </div>
</div>


        <div class="text-right">
            <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-md shadow-sm">
                Save Changes
            </button>
        </div>
    </form>
</div>
</div>

</div>
</div>
{% endblock %}
